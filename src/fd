// ==UserScript==
// @name         Angara Host - è‡ªåŠ¨æŒ‚æœºé˜²æ‰çº¿åŠ©æ‰‹
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  è‡ªåŠ¨æ£€æµ‹ AFK çŠ¶æ€ï¼Œæ¨¡æ‹Ÿå¿ƒè·³é˜²æ­¢æ‰çº¿ï¼Œå¹¶åœ¨æ‰çº¿æ—¶è‡ªåŠ¨é‡ç™»
// @author       Antigravity
// @match        *://freedash.worldofangara.fun/*
// @grant        none
// ==/UserScript==
(function () {
    'use strict';
    // ================= é…ç½®åŒºåŸŸ =================
    const CONFIG = {
        AFK_URL: '/earn/afk',      // æŒ‚æœºé¡µé¢çš„ç²¾å‡†è·¯å¾„
        CHECK_INTERVAL: 10000,     // çŠ¶æ€æ£€æŸ¥é¢‘ç‡ (10ç§’)
        HEARTBEAT_INTERVAL: 60000, // å¿ƒè·³é¢‘ç‡ (1åˆ†é’Ÿ)
    };
    console.log("%c[Angara AFK Helper] è„šæœ¬å·²å¯åŠ¨", "color: #ff4500; font-weight: bold;");
    // --- å¯è§†åŒ–é¢æ¿ UI ---
    const panel = document.createElement('div');
    panel.style = `
        position: fixed; top: 10px; right: 10px; width: 280px; height: 180px;
        background: rgba(0, 0, 0, 0.85); color: #00ff00; font-family: monospace;
        font-size: 12px; padding: 10px; border-radius: 8px; z-index: 100000;
        border: 1px solid #444; overflow: hidden; pointer-events: none;
        box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    `;
    panel.innerHTML = `
        <div style="border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 5px; font-weight: bold; color: #ffa500;">
            ğŸš€ Angara AFK Monitor v1.2
        </div>
        <div id="afk-log-container" style="height: 140px; overflow-y: auto;"></div>
    `;
    document.body.appendChild(panel);
    const logContainer = panel.querySelector('#afk-log-container');
    function customLog(msg, color = "#00ff00") {
        const time = new Date().toLocaleTimeString();
        const line = document.createElement('div');
        line.style.marginBottom = '2px';
        line.innerHTML = `<span style="color: #888;">[${time}]</span> <span style="color: ${color};">${msg}</span>`;
        logContainer.prepend(line);
        // åªä¿ç•™æœ€è¿‘ 50 æ¡æ—¥å¿—
        if (logContainer.children.length > 50) logContainer.lastChild.remove();
    }
    customLog("è„šæœ¬åˆå§‹åŒ–æˆåŠŸ...");
    // 1. æ¨¡æ‹Ÿäººç±»å¿ƒè·³ (ç»´æŒä¼šè¯)
    setInterval(() => {
        // æ¨¡æ‹Ÿå¾®å°çš„é¡µé¢æ»šåŠ¨
        window.scrollBy(0, 2);
        setTimeout(() => window.scrollBy(0, -2), 500);
        customLog("ğŸ’“ å‘é€æ´»è·ƒå¿ƒè·³ (Session Keepalive)", "#1e90ff");
    }, CONFIG.HEARTBEAT_INTERVAL);
    // 2. çŠ¶æ€ç›‘æ§ä¸ä¸»é€»è¾‘
    setInterval(() => {
        const currentUrl = window.location.href;
        // A. å¦‚æœåœ¨ç™»å½•é¡µï¼Œä¸åšåŠ¨ä½œï¼ˆç­‰å¾…ç”¨æˆ·è¾“å…¥å¯†ç ï¼Œé¿å…æ­»å¾ªç¯ï¼‰
        if (currentUrl.includes('login')) {
            customLog("âš ï¸ å‘ç°ç™»å½•é¡µï¼Œè¯·æ‰‹åŠ¨ç™»å½•", "#ff4500");
            return;
        }
        // B. å¦‚æœåœ¨ä¸»é¡µä½†æ²¡å»æŒ‚æœºé¡µï¼Œè‡ªåŠ¨è·³è½¬è¿‡å»
        if (!currentUrl.includes(CONFIG.AFK_URL)) {
            customLog("ğŸš€ ä¸åœ¨æŒ‚æœºé¡µï¼Œå°è¯•è·³è½¬...", "#ffa500");
            const afkLink = Array.from(document.querySelectorAll('a')).find(a => a.innerText.includes('AFK Rewards'));
            if (afkLink) {
                afkLink.click();
            } else if (!currentUrl.includes('/earn')) {
                // å¦‚æœæ‰¾ä¸åˆ°ä¾§è¾¹æ é“¾æ¥ï¼Œä¸”ä¸åœ¨ä»»ä½• /earn å­é¡µé¢ï¼Œç›´æ¥ä¿®æ”¹åœ°å€
                window.location.pathname = CONFIG.AFK_URL;
            }
            return;
        }
        // C. æ£€æŸ¥æŒ‚æœºçŠ¶æ€
        const statusText = document.body.innerText.toLowerCase();
        const startBtn = Array.from(document.querySelectorAll('button')).find(b =>
            b.innerText.toLowerCase().includes('start afk') ||
            b.innerText.toLowerCase().includes('begin afk')
        );
        const isActive = statusText.includes('status: active');
        if (!isActive) {
            if (startBtn) {
                customLog("âš¡ æŒ‚æœºå·²åœæ­¢ï¼Œæ‰§è¡Œè‡ªåŠ¨é‡å¯!", "#00ff00");
                startBtn.click();
            } else {
                customLog("ğŸ’¬ ç­‰å¾…é¡µé¢åŠ è½½æŒ‰é’®...", "#888");
            }
        } else {
            // ä»…æ¯ 3 æ¬¡å¾ªç¯æ˜¾ç¤ºä¸€æ¬¡æ­£å¸¸çŠ¶æ€ï¼Œé¿å…åˆ·å±
            if (Math.random() > 0.7) customLog("âœ… æŒ‚æœºä¸­: Status Active", "#32cd32");
        }
    }, CONFIG.CHECK_INTERVAL);
})();

Comment
Ctrl+Alt+M
